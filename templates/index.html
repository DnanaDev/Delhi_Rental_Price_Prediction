<!DOCTYPE html>
<html>
<head>
	<title>New Delhi Rent Prediction</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script type=text/javascript>
            $(function() {
              $('button#submit-form').bind('click', function() {
                $.post('/submit', {
                  size: $('input[name="size"]').val(),
					property_type : $('select[name="property_type"]').val(),
					suburb_name : $('select[id="local-sel"]').val(),
					locality_name : $('select[name="locality_name"]').val(),
                }, function(data) {
                  $('#result-preds').text("The Estimated Rent is Rs." + data.predicted_rent + "/Month");
                });
                return false;
              });
            });
        </script>
	<style>
		.jumbotron {
			padding-bottom: 10px;
			margin-bottom: 5px;
			padding-top: 10px;
		}

		.my-4{
			padding-bottom: 1px;
			padding-top: 0px;
		}


	</style>
</head>

<body>

	<div class="jumbotron" align="center">
		<h1 class="display-4">New Delhi Rent Prediction</h1>
		<p class="lead" >Predict monthly rent in New Delhi using Random Forest Regressor and XGBoost Regressor.</p>
		<hr>
		<p style="padding: 0px; margin-top: 0px; margin-bottom: 2px">Trained using 12,000 listings scraped from Makaan.com.<br>
			For Data Scraping, Analysis, and Model Development details check the Repository below.</p>
		<a class="btn btn-primary btn-lg" href="https://github.com/DnanaDev/Delhi_Rental_Price_Prediction" role="button">Learn more</a>
	</div>
	<div class="container">
		<div class="row">
			<div class="col-md-4 order-md-1" >
				<h4>Input Parameters</h4>
			<form action="/submit" method="POST" id = "input_pars"> <!--action is where the request will go -->
				<div class="form-group">
					<label >Area in Sq.Feet :</label>
					<input label = "Area" class= "form-control" type="number" name="size" placeholder="Size(sq-ft)"
					min="100" oninput="this.value = !!this.value &&
					Math.abs(this.value) >= 0 ? Math.abs(this.value) : null" required/>
				</div>
				<div class="form-group">
					<label >Type of Property :</label>
					<select class = "form-control" name = "property_type" form="input_pars">
						<option value="Apartment">Apartment</option>
						<option value="Independent Floor">Independent Floor</option>
						<option value="Independent House">Independent House</option>
						<option value="Villa">Villa</option>
					</select>
				</div>
				<div class="form-group">
					<label >District :</label>
					<select id = "local-sel" class = "form-control" name = "suburb_name" form="input_pars">
						<option value="Delhi Central">Delhi Central</option>
						<option value="Delhi East">Delhi East</option>
						<option value="Delhi South">Delhi South</option>
						<option value="Dwarka">Dwarka</option>
						<option value="North Delhi">North Delhi</option>
						<option value="Rohini">Rohini</option>
						<option value="West Delhi">West Delhi</option>
				</select>
				</div>
				<div class="form-group">
					<label >Locality :</label>
					<select class = "form-control" name = "locality_name" form="input_pars" id = "locality_name" >

					</select>
				</div>

				<script type="text/javascript">
					let locality_by_suburb = {
						"Delhi East": ["Swasthya Vihar", "mayur vihar phase 1", "Krishna Nagar", "New Ashok Nagar", "Anand Vihar", "Preet Vihar", "Shahdara", "Mandawali", "Mayur Vihar II", "Mayur Vihar", "Trilokpuri", "Vivek Vihar", "AGCR Enclave", "Surajmal Vihar", "Mayur Vihar III", "laxmi nagar near metro station", "IP Extension", "Patparganj", "Vinod Nagar North", "Mayur Vihar I ext", "Mayur Vihar 1 Extension", "Shakarpur", "Geeta Colony", "Mayur Vihar I", "Hargobind Enclave", "Laxmi Nagary", "Guru Angad Nagar", "Nirman Vihar", "Radhu Place", "Dilshad Garden", "Kapashera", "Delhi", "Yojna Vihar", "Pandav Nagar", "Vikas Marg", "GANESH NAGAR PANDAV NAGAR COMPLEX", "Saini Enclave", "Vigyan Vihar", "Vasundhara Enclave", "Yamuna Vihar", "Jagatpuri", "Vaishali", "Ram Prastha Colony", "Gagan Vihar", "Govindpura", "New Ashok Nagar near metro", "Ganesh Nagar"],
						"Rohini": ["Sector 25 Rohini", "Sector 14 Rohini", "Sector 16 Rohini", "Sector 8 Rohini", "Sector 13 Rohini", "Sector 9 Rohini", "Sector 24 Rohini", "Sector 23 Rohini", "Sector 28 Rohini", "Sector 22 Rohini", "Sector 26 Rohini", "Sector 21 Rohini"],
						"Delhi South": ["Malviya Nagar", "Greater Kailash", "Vasant Kunj", "Lajpat Nagar IV", "Greater kailash 1", "Kalkaji", "Hauz Khas", "Sarita Vihar", "Lajpat Nagar", "Safdarjung Enclave", "Chattarpur", "Shanti Niketan", "Sector 11 Rohini", "Saket", "Defence Colony", "East of Kailash", "Panchsheel Enclave", "Sainik Farms", "South Extension 2", "Greater Kailash II", "Vasant Vihar", "Jangpura", "Lajpat Nagar II", "Panchsheel Park", "Neb Sarai", "New Friends Colony", "Gautam Nagar", "Green Park", "Nizamuddin East", "Dera Mandi", "Jor bagh", "Munirka", "Jasola", "Khanpur", "Mehrauli", "Sarvpriya Vihar", "Katwaria Sarai", "Golf Links", "Adchini", "Rajpur", "Gulmohar park", "Maharani Bagh", "Alaknanda", "Lajpat Nagar III", "Safdarjung Development Area", "Moti Bagh", "Anand Niketan", "Maidan Garhi", "Sarvodaya Enclave", "Ghitorni"],
						"West Delhi": ["Rohini sector 24", "Paschim Vihar", "Dwarka Mor", "Uttam Nagar", "Mansarover Garden", "Rohini sector 16", "Tagore Garden Extension", "Sector 18 Rohini", "Rajouri Garden", "Janakpuri", "Hari Nagar", "Vikas Puri", "Sector 3 Rohini", "Ashok Nagar", "Mayapuri", "rohini sector 5", "Mukhram Garden", "Uttam Nagar Gulabhi Bagh", "Uttam Nagar East", "Bhagwati Garden Extension", "Hari Enclave", "Part B", "SHIVAJI VIHAR", "Pitampura near NSP", "Kohat Enclave", "param puri", "Meera Bagh", "Rama Park", "Uttam Nagar west", "Saraswati Vihar", "Shivaji Marg", "CA Apartments", "Prashant Vihar", "Nawada Uttam Nagar"],
						"North Delhi": ["Karol Bagh", "Pitampura", "Dr Mukherji Nagar", "Shastri Nagar", "Ashok Vihar", "Burari", "Model Town", "Shakti Nagar", "Vijay Nagar", "Gujranwala Town", "Kamla Nagar", "Azadpur", "Civil Lines", "Netaji Subhash Place", "Malka Ganj", "Anand Parbat"],
						"Delhi Central": ["Sheikh Sarai", "Ramesh Nagar", "Shakurbasti", "Patel Nagar", "Bindapur", "Naraina", "greater kailash Enclave 1", "Tilak Nagar", "Kirti Nagar", "Punjabi Bagh", "Kalyan Vihar", "Pragati Vihar", "Subhash Nagar", "nawada", "Ranjeet Nagar", "Roop Nagar", "Bali Nagar", "Raja garden", "Shadipur", "Tri Nagar", "Moti Nagar", "Karampura", "Sainik nagar 1", "Sheikh Sarai Village", "Khushi Ram Park Delhi", "Jawahar Nagar", "Sandesh Vihar", "i p extension patparganj", "Kapil Vihar", "Engineer Enclave", "West Patel Nagar", "Mata Rameshwari Nehru Nagar", "Shivaji Park", "New Rohtak Road", "Old Rajender Nagar", "New Rohtak Road Karol Bagh", "Chanakyapuri", "Malviya Nagar Block G", "Lok Vihar", "Inderpuri", "Connaught Place", "India Gate", "Pushpanjali Enclave", "Ramesh Nagar raja garden bali nagar", "Om Vihar", "Derawal Nagar", "Tilak Marg", "Baljeet Nagar", "Paharganj", "Rani Bagh", "Shankar Road", "Tagore Garden", "Subzi Mandi", "Wazirabad"],
						"Dwarka": ["Sector 19 Dwarka", "Sector 9 Dwarka", "Sector 14 Dwarka", "Chandra Park", "Sector 2 Dwarka", "Sector 22 Dwarka", "Sector 13 Dwarka", "Sector 18A Dwarka", "Sector 3 Dwarka", "Sector 10 Dwarka", "Sector 11 Dwarka", "Sector 12 Dwarka", "Sector 18B Dwarka", "Sector 7 Dwarka", "Sector 6 Dwarka", "Vikram Nagar", "Sector 23 Dwarka", "Sector 4 Dwarka", "Dabri", "Sector 8 Dwarka", "Sewak Park", "Sector 1 Dwarka", "Palam", "Mahavir Enclave", "Matiala", "Dwarka Sector 15", "Transit Camp", "Sector 5 Dwarka", "dwarka sector 17", "Sector 17 Dwarka", "Sector 23B Dwarka", "Suraj Vihar", "Sector 21 Dwarka", "Dwarka New Delhi 110075", "Sector 23", "Sector 8", "Shivani Enclave", "Dwarka Phase 2", "Shanti Park Dwarka", "dwarka sector 12", "Nasirpur", "DWARKA SECTOR 9", "Dwarka Sector 7", "Dwarka sec 6", "Zone L Dwarka", "Sector 12 Dwarka New Delhi", "dwarka sector 19", "ramphal chowk", "SECTOR 7 DWARKA NEW DELHI", "Sector 11", "Block F", "Sector 4", "dwarka sector 13", "Sector 12", "Sector 5", "Sector 9", "Sector 6", "Sector 13", "Sector 7", "Dwarka More Mohan Garden", "Mohan Garden", "Sector 16A Dwarka", "Sector 14", "Sector 15", "Dhul Siras", "Madhu Vihar", "Sector 16B Dwarka"]
					};
					let selected_suburb = document.getElementById("local-sel").value;
					let select = document.getElementById("locality_name");
					// Populate list with options:
					for (let i = 0; i < locality_by_suburb[selected_suburb].length; i++)
						{
							let opt = locality_by_suburb[selected_suburb][i];
							select.innerHTML += "<option value=\"" + opt + "\">" + opt + "</option>";
						}
					function populateLocals()
					{// clear existing html
						document.getElementById("locality_name").innerHTML = "";
						let selected_suburb = document.getElementById("local-sel").value;
						let select = document.getElementById("locality_name");
						// Populate list with options:
						for (let i = 0; i < locality_by_suburb[selected_suburb].length; i++) {
							let opt = locality_by_suburb[selected_suburb][i];
							select.innerHTML += "<option value=\"" + opt + "\">" + opt + "</option>";
						}
					}
					document.getElementById("local-sel").onchange = populateLocals ;
				</script>
				<div class="text-center">
					<button id="submit-form"type = "submit" class = "btn btn-primary" > Predict </button>
				</div>

				<div id="result-preds" class="lead text-center" style="padding-top: 5px">
					<!-- see if you can get result to populate here
				The Estimated Monthly Rent is Month
				1. The rental is in the x percentile of rent listings by locality, suburb in Delhi.
				2. The rental is in the x percentile of size listings by locality, suburb in Delhi.
				2. Some measure of confidence in prediction
				3. button to get Shapely Feature importance.-->

				</div>

			</form>
			</div>
			<div class="col-md-8 order-md-2 mb-4">
					<h4 class="text-center">Training Data Heatmap</h4>
				<img src="Static/complete_heatmap_2lac.jpg" class="img-fluid rounded" alt="Responsive image"
				style="display: block; margin-left: auto;margin-right: auto">
			</div>
		</div>
	</div>
	</div>
	</center>
	</body>
	</html>